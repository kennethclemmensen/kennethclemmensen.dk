(()=>{"use strict";var t,e,i,s,n,r;!function(t){t.Click="click",t.DOMContentLoaded="DOMContentLoaded",t.Error="error",t.Keydown="keydown",t.Keypress="keypress",t.Load="load"}(t||(t={})),function(t){t.Fade="fade",t.SlideDown="slide_down",t.SlideLeft="slide_left",t.SlideRight="slide_right",t.SlideUp="slide_up"}(e||(e={})),function(t){t.Get="get",t.Put="put"}(i||(i={})),function(t){t[t.Ok=200]="Ok"}(s||(s={})),function(t){t.AboutMePage="/om-mig",t.ApiFileDownloads="/wp-json/kcapi/v1/fileDownloads?fileid=",t.ApiFiles="/wp-json/kcapi/v1/files?type=",t.ApiPages="/wp-json/kcapi/v1/pages/",t.Frontpage="/",t.ImagesPage="/billeder",t.JavaPage="/java",t.MoviePage="/film",t.PhpPage="/php",t.SearchPage="/soeg",t.SitemapPage="/sitemap"}(n||(n={}));class a{constructor(){this.setupFilesApp()}setupFilesApp(){const e={components:{files:{data:()=>({files:[],offset:0}),created:function(){const e=new XMLHttpRequest;e.open(i.Get,n.ApiFiles+this.fileTypes,!0),e.addEventListener(t.Load,(()=>{this.files=e.status===s.Ok?JSON.parse(e.responseText):[]})),e.addEventListener(t.Error,(()=>{this.files=[]})),e.send()},methods:{previousPage:function(){this.offset-=parseInt(this.perPage)},nextPage:function(){this.offset+=parseInt(this.perPage)},updateFileDownloads:e=>{const r=new XMLHttpRequest;r.open(i.Put,n.ApiFileDownloads+e.id,!0),r.addEventListener(t.Load,(()=>{r.status===s.Ok&&e.downloads++})),r.send()}},props:{fileTypes:{required:!0,type:String},perPage:{required:!0,type:Number},previousText:{required:!0,type:String},nextText:{required:!0,type:String},numberOfDownloadsText:{required:!0,type:String}},template:'\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-for="file in files.slice(offset, (offset + parseInt(perPage)))">\n\t\t\t\t\t\t\t\t<a :href="file.url" @click="updateFileDownloads(file)" rel="nofollow" download>{{ file.fileName }}</a>\n\t\t\t\t\t\t\t\t<p>{{ file.description }}</p>\n\t\t\t\t\t\t\t\t<p>{{ numberOfDownloadsText }} {{ file.downloads }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pagination">\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="nextPage" v-if="offset < (files.length - parseInt(perPage))">{{ nextText }}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}}};Vue.createApp(e).mount("#files-app")}}class o{constructor(){this.setupSearchApp()}setupSearchApp(){const e={data:()=>({searchString:"",results:[]}),watch:{searchString:function(){this.debouncedSearch()}},created:function(){this.debouncedSearch=_.debounce(this.search,500)},methods:{search:function(){if(""===this.searchString)return void(this.results=[]);const e=new XMLHttpRequest;e.open(i.Get,n.ApiPages+this.searchString,!0),e.addEventListener(t.Load,(()=>{this.results=e.status===s.Ok?JSON.parse(e.responseText):[]})),e.addEventListener(t.Error,(()=>{this.results=[]})),e.send()}},components:{"search-results":{data:()=>({offset:0}),methods:{previousPage:function(){this.offset-=parseInt(this.perPage)},nextPage:function(){this.offset+=parseInt(this.perPage)}},props:{results:{required:!0,type:Array},perPage:{required:!0,type:Number},previousText:{required:!0,type:String},nextText:{required:!0,type:String}},watch:{results:function(){this.offset=0}},template:'\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-for="result in results.slice(offset, (offset + parseInt(perPage)))" :key="result.id">\n\t\t\t\t\t\t\t\t<a :href="result.link">{{ result.title }}</a>\n\t\t\t\t\t\t\t\t<p>{{ result.excerpt }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pagination">\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="nextPage" v-if="offset < (results.length - parseInt(perPage))">{{ nextText }}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}}};Vue.createApp(e).mount("#search-app")}}!function(t){t.B="B",t.F="F",t.J="J",t.O="O",t.P="P",t.S="S"}(r||(r={}));class d{constructor(){this.setupKeypressEventListener(),this.setupKeydownEventListener()}setupKeypressEventListener(){document.addEventListener(t.Keypress,(t=>{if(t.shiftKey)switch(t.key){case r.B:this.redirectToUrl(n.ImagesPage);break;case r.F:this.redirectToUrl(n.Frontpage);break;case r.J:this.redirectToUrl(n.JavaPage);break;case r.O:this.redirectToUrl(n.AboutMePage);break;case r.P:this.redirectToUrl(n.PhpPage);break;case r.S:this.redirectToUrl(n.SearchPage)}}))}setupKeydownEventListener(){document.addEventListener(t.Keydown,(t=>{if(t.ctrlKey&&t.shiftKey)switch(t.key){case r.F:this.redirectToUrl(n.MoviePage);break;case r.S:this.redirectToUrl(n.SitemapPage)}}))}redirectToUrl(t){location.href=t}}var l,c,u,p=function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},f=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class h{constructor(){l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),p(this,l,document.getElementsByClassName("slider__slide"),"f"),p(this,c,document.getElementById("slider-image"),"f"),p(this,u,-1,"f")}showSlides(t,e,i){var s;let n=this.getRandomNumber();const r="data-slide-image";let a=null===(s=f(this,l,"f")[n])||void 0===s?void 0:s.getAttribute(r);if(!a)return;this.setBackgroundImage(a);const o=this.getStartKeyframes(i),d=this.getEndKeyframes(i);setInterval((()=>{f(this,c,"f")&&(f(this,c,"f").animate(o,{duration:t}).onfinish=()=>{var e,i;n=this.getRandomNumber(),a=null===(e=f(this,l,"f")[n])||void 0===e?void 0:e.getAttribute(r),a&&this.setBackgroundImage(a),null===(i=f(this,c,"f"))||void 0===i||i.animate(d,{duration:t})})}),e)}getRandomNumber(){const t=Math.floor(Math.random()*f(this,l,"f").length);return f(this,u,"f")===t?this.getRandomNumber():(p(this,u,t,"f"),f(this,u,"f"))}setBackgroundImage(t){f(this,c,"f")&&(f(this,c,"f").style.backgroundImage='url("'+t+'")')}getStartKeyframes(t){let i=[];if(f(this,c,"f")){const s=f(this,c,"f").clientWidth,n=f(this,c,"f").clientHeight,r="px";switch(t){case e.SlideDown:i=[{backgroundPositionY:0},{backgroundPositionY:n+r}];break;case e.SlideLeft:i=[{backgroundPositionX:0},{backgroundPositionX:-s+r}];break;case e.SlideRight:i=[{backgroundPositionX:0},{backgroundPositionX:s+r}];break;case e.SlideUp:i=[{backgroundPositionY:0},{backgroundPositionY:-n+r}];break;default:i=[{opacity:1},{opacity:0}]}}return i}getEndKeyframes(t){let i=[];if(f(this,c,"f")){const s=f(this,c,"f").clientWidth,n=f(this,c,"f").clientHeight,r="px";switch(t){case e.SlideDown:i=[{backgroundPositionY:n+r},{backgroundPositionY:0}];break;case e.SlideLeft:i=[{backgroundPositionX:-s+r},{backgroundPositionX:0}];break;case e.SlideRight:i=[{backgroundPositionX:s+r},{backgroundPositionX:0}];break;case e.SlideUp:i=[{backgroundPositionY:-n+r},{backgroundPositionY:0}];break;default:i=[{opacity:0},{opacity:1}]}}return i}}l=new WeakMap,c=new WeakMap,u=new WeakMap;var g,v=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};g=new WeakMap,new class{constructor(){g.set(this,void 0),function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?n.call(t,i):n?n.value=i:e.set(t,i)}(this,g,document.body,"f"),document.addEventListener(t.DOMContentLoaded,(()=>{this.setupSlider(),this.setupMobileMenu(),lightbox.option({albumLabel:v(this,g,"f").dataset.imageText+" %1 "+v(this,g,"f").dataset.ofText+" %2"}),new a,new o,new d}))}setupSlider(){var t;const i=document.getElementById("slider"),s=null==i?void 0:i.dataset,n=(null==s?void 0:s.delay)?parseInt(s.delay):500,r=(null==s?void 0:s.duration)?parseInt(s.duration):8e3,a=null!==(t=null==s?void 0:s.animation)&&void 0!==t?t:e.Fade;(new h).showSlides(n,r,a)}setupMobileMenu(){const e=document.getElementById("mobile-menu-trigger"),i=document.getElementById("mobile-menu"),s="show-mobile-menu";null==e||e.addEventListener(t.Click,(t=>{t.preventDefault(),null==e||e.classList.toggle("header__nav-trigger--active"),null==i||i.classList.toggle("mobile-menu--active"),document.documentElement.classList.toggle(s),v(this,g,"f").classList.toggle(s)})),document.querySelectorAll(".mobile-menu__arrow").forEach((e=>{e.addEventListener(t.Click,(t=>{var i,s;t.preventDefault(),e.classList.toggle("mobile-menu__arrow--rotated");const n=null===(s=null===(i=e.parentNode)||void 0===i?void 0:i.parentElement)||void 0===s?void 0:s.getElementsByClassName("sub-menu")[0];null==n||n.classList.toggle("show")}))}))}}})();