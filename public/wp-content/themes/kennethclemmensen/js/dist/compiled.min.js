(()=>{"use strict";var e,t,s,i,n,r;!function(e){e.Click="click",e.DOMContentLoaded="DOMContentLoaded",e.Error="error",e.Keydown="keydown",e.Keypress="keypress",e.Load="load"}(e||(e={})),function(e){e.Fade="fade",e.SlideDown="slide_down",e.SlideLeft="slide_left",e.SlideRight="slide_right",e.SlideUp="slide_up"}(t||(t={})),function(e){e.Get="get",e.Put="put"}(s||(s={})),function(e){e[e.Ok=200]="Ok"}(i||(i={})),function(e){e.AboutMePage="/om-mig",e.ApiFileDownloads="/wp-json/kcapi/v1/fileDownloads?fileid=",e.ApiFiles="/wp-json/kcapi/v1/files?type=",e.ApiPages="/wp-json/kcapi/v1/pages/",e.Frontpage="/",e.ImagesPage="/billeder",e.JavaPage="/java",e.MoviePage="/film",e.PhpPage="/php",e.SearchPage="/soeg",e.SitemapPage="/sitemap"}(n||(n={}));class a{constructor(){this.setupFilesApp()}setupFilesApp(){const t={components:{files:{data:()=>({files:[],offset:0}),created:function(){const t=new XMLHttpRequest;t.open(s.Get,n.ApiFiles+this.fileTypes,!0),t.addEventListener(e.Load,(()=>{this.files=t.status===i.Ok?JSON.parse(t.responseText):[]})),t.addEventListener(e.Error,(()=>{this.files=[]})),t.send()},methods:{previousPage:function(){this.offset-=parseInt(this.perPage)},nextPage:function(){this.offset+=parseInt(this.perPage)},updateFileDownloads:t=>{const r=new XMLHttpRequest;r.open(s.Put,n.ApiFileDownloads+t.id,!0),r.addEventListener(e.Load,(()=>{r.status===i.Ok&&t.downloads++})),r.send()}},props:{fileTypes:{required:!0,type:String},perPage:{required:!0,type:Number},previousText:{required:!0,type:String},nextText:{required:!0,type:String},numberOfDownloadsText:{required:!0,type:String}},template:'\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-for="file in files.slice(offset, (offset + parseInt(perPage)))">\n\t\t\t\t\t\t\t\t<a :href="file.url" @click="updateFileDownloads(file)" rel="nofollow" download>{{ file.fileName }}</a>\n\t\t\t\t\t\t\t\t<p>{{ file.description }}</p>\n\t\t\t\t\t\t\t\t<p>{{ numberOfDownloadsText }} {{ file.downloads }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pagination">\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="nextPage" v-if="offset < (files.length - parseInt(perPage))">{{ nextText }}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}}};Vue.createApp(t).mount("#files-app")}}class o{constructor(){this.setupSearchApp()}setupSearchApp(){const t={data:()=>({searchString:"",results:[]}),watch:{searchString:function(){this.debouncedSearch()}},created:function(){this.debouncedSearch=_.debounce(this.search,500)},methods:{search:function(){if(""===this.searchString)return void(this.results=[]);const t=new XMLHttpRequest;t.open(s.Get,n.ApiPages+this.searchString,!0),t.addEventListener(e.Load,(()=>{this.results=t.status===i.Ok?JSON.parse(t.responseText):[]})),t.addEventListener(e.Error,(()=>{this.results=[]})),t.send()}},components:{"search-results":{data:()=>({offset:0}),methods:{previousPage:function(){this.offset-=parseInt(this.perPage)},nextPage:function(){this.offset+=parseInt(this.perPage)}},props:{results:{required:!0,type:Array},perPage:{required:!0,type:Number},previousText:{required:!0,type:String},nextText:{required:!0,type:String}},watch:{results:function(){this.offset=0}},template:'\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-for="result in results.slice(offset, (offset + parseInt(perPage)))" :key="result.id">\n\t\t\t\t\t\t\t\t<a :href="result.link">{{ result.title }}</a>\n\t\t\t\t\t\t\t\t<p>{{ result.excerpt }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pagination">\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n\t\t\t\t\t\t\t\t<a href="#" @click.prevent="nextPage" v-if="offset < (results.length - parseInt(perPage))">{{ nextText }}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}}};Vue.createApp(t).mount("#search-app")}}!function(e){e.B="B",e.F="F",e.J="J",e.O="O",e.P="P",e.S="S"}(r||(r={}));class d{constructor(){this.setupKeypressEventListener(),this.setupKeydownEventListener()}setupKeypressEventListener(){document.addEventListener(e.Keypress,(e=>{if(e.shiftKey)switch(e.key){case r.B:this.redirectToUrl(n.ImagesPage);break;case r.F:this.redirectToUrl(n.Frontpage);break;case r.J:this.redirectToUrl(n.JavaPage);break;case r.O:this.redirectToUrl(n.AboutMePage);break;case r.P:this.redirectToUrl(n.PhpPage);break;case r.S:this.redirectToUrl(n.SearchPage)}}))}setupKeydownEventListener(){document.addEventListener(e.Keydown,(e=>{if(e.ctrlKey&&e.shiftKey)switch(e.key){case r.F:this.redirectToUrl(n.MoviePage);break;case r.S:this.redirectToUrl(n.SitemapPage)}}))}redirectToUrl(e){location.href=e}}class l{#e;#t;#s;constructor(){this.#e=document.getElementsByClassName("slider__slide"),this.#t=document.getElementById("slider-image"),this.#s=-1}showSlides(e,t,s){let i=this.getRandomNumber();const n="data-slide-image";let r=this.#e[i]?.getAttribute(n);if(!r)return;this.setBackgroundImage(r);const a=this.getStartKeyframes(s),o=this.getEndKeyframes(s);setInterval((()=>{this.#t&&(this.#t.animate(a,{duration:e}).onfinish=()=>{i=this.getRandomNumber(),r=this.#e[i]?.getAttribute(n),r&&this.setBackgroundImage(r),this.#t?.animate(o,{duration:e})})}),t)}getRandomNumber(){const e=Math.floor(Math.random()*this.#e.length);return this.#s===e?this.getRandomNumber():(this.#s=e,this.#s)}setBackgroundImage(e){this.#t&&(this.#t.style.backgroundImage='url("'+e+'")')}getStartKeyframes(e){let s=[];if(this.#t){const i=this.#t.clientWidth,n=this.#t.clientHeight,r="px";switch(e){case t.SlideDown:s=[{backgroundPositionY:0},{backgroundPositionY:n+r}];break;case t.SlideLeft:s=[{backgroundPositionX:0},{backgroundPositionX:-i+r}];break;case t.SlideRight:s=[{backgroundPositionX:0},{backgroundPositionX:i+r}];break;case t.SlideUp:s=[{backgroundPositionY:0},{backgroundPositionY:-n+r}];break;default:s=[{opacity:1},{opacity:0}]}}return s}getEndKeyframes(e){let s=[];if(this.#t){const i=this.#t.clientWidth,n=this.#t.clientHeight,r="px";switch(e){case t.SlideDown:s=[{backgroundPositionY:n+r},{backgroundPositionY:0}];break;case t.SlideLeft:s=[{backgroundPositionX:-i+r},{backgroundPositionX:0}];break;case t.SlideRight:s=[{backgroundPositionX:i+r},{backgroundPositionX:0}];break;case t.SlideUp:s=[{backgroundPositionY:-n+r},{backgroundPositionY:0}];break;default:s=[{opacity:0},{opacity:1}]}}return s}}new class{#i;constructor(){this.#i=document.body,document.addEventListener(e.DOMContentLoaded,(()=>{this.setupSlider(),this.setupMobileMenu(),lightbox.option({albumLabel:this.#i.dataset.imageText+" %1 "+this.#i.dataset.ofText+" %2"}),new a,new o,new d}))}setupSlider(){const e=document.getElementById("slider")?.dataset,s=e?.delay?parseInt(e.delay):500,i=e?.duration?parseInt(e.duration):8e3,n=e?.animation??t.Fade;(new l).showSlides(s,i,n)}setupMobileMenu(){const t=document.getElementById("mobile-menu-trigger"),s=document.getElementById("mobile-menu"),i="show-mobile-menu";t?.addEventListener(e.Click,(e=>{e.preventDefault(),t?.classList.toggle("header__mobile-menu-trigger--active"),s?.classList.toggle("mobile-menu--active"),document.documentElement.classList.toggle(i),this.#i.classList.toggle(i)})),document.querySelectorAll(".mobile-menu__arrow").forEach((t=>{t.addEventListener(e.Click,(e=>{e.preventDefault(),t.classList.toggle("mobile-menu__arrow--rotated");const s=t.parentNode?.parentElement?.getElementsByClassName("sub-menu")[0];s?.classList.toggle("show")}))}))}}})();