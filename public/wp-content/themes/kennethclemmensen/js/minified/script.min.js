class App{constructor(){this.setupApp()}setupApp(){document.addEventListener("DOMContentLoaded",()=>{var t,e;this.body=document.querySelector("body"),this.setupMobileNavigation(),this.setupDownloadLinks();let s=document.getElementById("slider");new Slider(s.dataset.delay,s.dataset.duration),lightbox.option({albumLabel:(null===(t=this.body)||void 0===t?void 0:t.dataset.imageText)+" %1 "+(null===(e=this.body)||void 0===e?void 0:e.dataset.ofText)+" %2"}),new SearchApp})}setupMobileNavigation(){var t;let e=document.getElementById("mobile-menu-trigger"),s=document.getElementById("mobile-menu");null===(t=e)||void 0===t||t.addEventListener("click",t=>{var o,r,n;t.preventDefault(),null===(o=e)||void 0===o||o.classList.toggle("header__nav-trigger--active"),null===(r=s)||void 0===r||r.classList.toggle("mobile-nav--active"),document.getElementsByTagName("html")[0].classList.toggle("show-mobile-menu"),null===(n=this.body)||void 0===n||n.classList.toggle("show-mobile-menu")}),document.querySelectorAll(".mobile-nav__arrow").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("mobile-nav__arrow--rotated");let s=t.parentNode.parentNode.getElementsByClassName("sub-menu")[0];s.style.display="block"===s.style.display?"none":"block"})})}setupDownloadLinks(){document.querySelectorAll(".fdwc__link").forEach(t=>{t.addEventListener("click",()=>{let e=new XMLHttpRequest,s="/wp-json/kcapi/v1/fileDownloads?fileid="+t.dataset.fileId;e.open(HttpMethod.Put,s,!0),e.addEventListener("load",()=>{if(e.status===HttpStatusCode.Ok){let e=new XMLHttpRequest;e.open(HttpMethod.Get,s,!0),e.addEventListener("load",()=>{let s=t.parentNode.querySelector("span.fdwc__downloads");s.innerText=e.status===HttpStatusCode.Ok?e.responseText:parseInt(s.innerText)+1}),e.send()}}),e.send()})})}}new App;!function(t){t.Get="get",t.Put="put"}(HttpMethod||(HttpMethod={}));!function(t){t[t.Ok=200]="Ok"}(HttpStatusCode||(HttpStatusCode={}));class SearchApp{constructor(){this.setupSearchApp()}setupSearchApp(){new Vue({el:"#search-app",data:{searchString:"",results:[]},watch:{searchString:function(){this.search()}},methods:{search:function(){if(""===this.searchString)return void(this.results=[]);let t=new XMLHttpRequest;t.open(HttpMethod.Get,"/wp-json/kcapi/v1/pages/"+this.searchString,!0),t.addEventListener("load",()=>{this.results=t.status===HttpStatusCode.Ok?JSON.parse(t.responseText):[]}),t.addEventListener("error",()=>{this.results=[]}),t.send()}},components:{"search-results":{data:function(){return{offset:0,perPage:5}},methods:{previousPage:function(){this.offset-=this.perPage},nextPage:function(){this.offset+=this.perPage}},props:{results:{required:!0,type:Array},previousText:{required:!0,type:String},nextText:{required:!0,type:String}},watch:{results:function(){this.offset=0}},template:'\n                        <div>\n                            <div v-for="result in results.slice(offset, (offset + perPage))" :key="result.id">\n                                <a :href="result.link">{{ result.title }}</a>\n                                <p>{{ result.excerpt }}</p>\n                            </div>\n                            <div>\n                                <a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n                                <a href="#" @click.prevent="nextPage" v-if="offset < (results.length - perPage)">{{ nextText }}</a>\n                            </div>\n                        </div>\n                    '}}})}}class Slider{constructor(t,e){this.delay=t,this.duration=e,this.sliderImages=jQuery(".slider__image"),this.currentRandomNumber=-1,this.showSlider()}getRandomNumber(){let t=Math.floor(Math.random()*this.sliderImages.length);return this.currentRandomNumber===t?this.getRandomNumber():(this.currentRandomNumber=t,this.currentRandomNumber)}showSlider(){let t=this.getRandomNumber();this.sliderImages.eq(t).show(),setInterval(()=>{this.sliderImages.eq(t).fadeOut(this.duration,()=>{t=this.getRandomNumber(),this.sliderImages.eq(t).fadeIn(this.duration)})},this.delay)}}var HttpMethod;!function(t){t.Get="get",t.Put="put"}(HttpMethod||(HttpMethod={}));var HttpStatusCode;!function(t){t[t.Ok=200]="Ok"}(HttpStatusCode||(HttpStatusCode={}));