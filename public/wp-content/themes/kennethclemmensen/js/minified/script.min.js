class App{constructor(){this.setupApp()}setupApp(){document.addEventListener("DOMContentLoaded",()=>{var e,t;this.body=document.querySelector("body"),this.setupMobileNavigation(),this.setupDownloadLinks();let s=document.getElementById("slider");new Slider(s.dataset.delay,s.dataset.duration),lightbox.option({albumLabel:(null===(e=this.body)||void 0===e?void 0:e.dataset.imageText)+" %1 "+(null===(t=this.body)||void 0===t?void 0:t.dataset.ofText)+" %2"}),new SearchApp})}setupMobileNavigation(){var e;let t=document.getElementById("mobile-menu-trigger"),s=document.getElementById("mobile-menu");null===(e=t)||void 0===e||e.addEventListener("click",e=>{var r,o,i;e.preventDefault(),null===(r=t)||void 0===r||r.classList.toggle("header__nav-trigger--active"),null===(o=s)||void 0===o||o.classList.toggle("mobile-nav--active"),document.getElementsByTagName("html")[0].classList.toggle("show-mobile-menu"),null===(i=this.body)||void 0===i||i.classList.toggle("show-mobile-menu")}),document.querySelectorAll(".mobile-nav__arrow").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),e.classList.toggle("mobile-nav__arrow--rotated");let s=e.parentNode.parentNode.getElementsByClassName("sub-menu")[0];s.style.display="block"===s.style.display?"none":"block"})})}setupDownloadLinks(){document.querySelectorAll(".fdwc__link").forEach(e=>{e.addEventListener("click",()=>{let t=new XMLHttpRequest,s="/wp-json/kcapi/v1/fileDownloads?fileid="+e.dataset.fileId;t.open(HttpMethod.Put,s,!0),t.addEventListener("load",()=>{if(t.status===HttpStatusCode.Ok){let t=new XMLHttpRequest;t.open(HttpMethod.Get,s,!0),t.addEventListener("load",()=>{let s=e.parentNode.querySelector("span.fdwc__downloads");s.innerText=t.status===HttpStatusCode.Ok?t.responseText:parseInt(s.innerText)+1}),t.send()}}),t.send()})})}}new App;var HttpMethod;!function(e){e.Get="get",e.Put="put"}(HttpMethod||(HttpMethod={}));var HttpStatusCode;!function(e){e[e.Ok=200]="Ok"}(HttpStatusCode||(HttpStatusCode={}));class SearchApp{constructor(){this.setupSearchApp()}setupSearchApp(){new Vue({el:"#search-app",data:{searchString:"",results:[]},watch:{searchString:function(){this.search()}},methods:{search:function(){if(""===this.searchString)return void(this.results=[]);let e=new XMLHttpRequest;e.open(HttpMethod.Get,"/wp-json/kcapi/v1/pages/"+this.searchString,!0),e.addEventListener("load",()=>{this.results=e.status===HttpStatusCode.Ok?JSON.parse(e.responseText):[]}),e.addEventListener("error",()=>{this.results=[]}),e.send()}},components:{"search-results":{data:function(){return{offset:0,perPage:5}},methods:{previousPage:function(){this.offset-=this.perPage},nextPage:function(){this.offset+=this.perPage}},props:{results:{required:!0,type:Array},previousText:{required:!0,type:String},nextText:{required:!0,type:String}},watch:{results:function(){this.offset=0}},template:'\n                        <div>\n                            <div v-for="result in results.slice(offset, (offset + perPage))" :key="result.id">\n                                <a :href="result.link">{{ result.title }}</a>\n                                <p>{{ result.excerpt }}</p>\n                            </div>\n                            <div>\n                                <a href="#" @click.prevent="previousPage" v-if="offset > 0">{{ previousText }}</a>\n                                <a href="#" @click.prevent="nextPage" v-if="offset < (results.length - perPage)">{{ nextText }}</a>\n                            </div>\n                        </div>\n                    '}}})}}class Slider{constructor(e,t){this.delay=e,this.duration=t,this.sliderImages=jQuery(".slider__image"),this.currentRandomNumber=-1,this.showSlider()}getRandomNumber(){let e=Math.floor(Math.random()*this.sliderImages.length);return this.currentRandomNumber===e?this.getRandomNumber():(this.currentRandomNumber=e,this.currentRandomNumber)}showSlider(){let e=this.getRandomNumber();this.sliderImages.eq(e).show(),setInterval(()=>{this.sliderImages.eq(e).fadeOut(this.duration,()=>{e=this.getRandomNumber(),this.sliderImages.eq(e).fadeIn(this.duration)})},this.delay)}}